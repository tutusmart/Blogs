import{_ as n,c as a}from"./app.1c29f384.js";const s={},t=a(`<h1 id="requestidlecallback" tabindex="-1"><a class="header-anchor" href="#requestidlecallback" aria-hidden="true">#</a> requestIdleCallback</h1><h2 id="\u9898\u76EE" tabindex="-1"><a class="header-anchor" href="#\u9898\u76EE" aria-hidden="true">#</a> \u9898\u76EE</h2><p>\u662F\u5426\u4E86\u89E3\u8FC7 requestIdleCallback \uFF1F</p><h2 id="\u7531-react-fiber-\u5F15\u8D77\u7684\u5173\u6CE8" tabindex="-1"><a class="header-anchor" href="#\u7531-react-fiber-\u5F15\u8D77\u7684\u5173\u6CE8" aria-hidden="true">#</a> \u7531 React Fiber \u5F15\u8D77\u7684\u5173\u6CE8</h2><p>React 16 \u5185\u90E8\u4F7F\u7528 Fiber \uFF0C\u5373\u7EC4\u4EF6\u6E32\u67D3\u8FC7\u7A0B\u53EF\u4EE5\u6682\u505C\uFF0C\u5148\u53BB\u6267\u884C\u9AD8\u4F18\u4EFB\u52A1\uFF0CCPU \u95F2\u7F6E\u65F6\u518D\u7EE7\u7EED\u6E32\u67D3\u3002<br> \u5176\u4E2D\u7528\u5230\u7684\u6838\u5FC3 API \u5C31\u662F requestIdleCallback \u3002</p><h2 id="requestanimationframe-\u6BCF\u6B21\u6E32\u67D3\u90FD\u6267\u884C-\u9AD8\u4F18" tabindex="-1"><a class="header-anchor" href="#requestanimationframe-\u6BCF\u6B21\u6E32\u67D3\u90FD\u6267\u884C-\u9AD8\u4F18" aria-hidden="true">#</a> requestAnimationFrame \u6BCF\u6B21\u6E32\u67D3\u90FD\u6267\u884C\uFF0C\u9AD8\u4F18</h2><p>\u9875\u9762\u7684\u6E32\u67D3\u662F\u4E00\u5E27\u4E00\u5E27\u8FDB\u884C\u7684\uFF0C\u81F3\u5C11\u6BCF\u79D2 60 \u6B21\uFF08\u5373 16.6ms \u4E00\u6B21\uFF09\u624D\u80FD\u8089\u773C\u611F\u89C9\u6D41\u7545\u3002\u6240\u4EE5\uFF0C\u7F51\u9875\u52A8\u753B\u4E5F\u8981\u8FD9\u4E2A\u5E27\u7387\u624D\u80FD\u6D41\u7545\u3002</p><p>\u7528 JS \u6765\u63A7\u5236\u65F6\u95F4\u662F\u4E0D\u9760\u8C31\u7684\uFF0C\u56E0\u4E3A JS \u6267\u884C\u672C\u8EAB\u8FD8\u9700\u8981\u65F6\u95F4\uFF0C\u800C\u4E14 JS \u548C DOM \u6E32\u67D3\u7EBF\u7A0B\u4E92\u65A5\u3002\u6240\u4EE5 ms \u7EA7\u522B\u7684\u65F6\u95F4\u4F1A\u51FA\u73B0\u8BEF\u5DEE\u3002<br><code>requestAnimationFrame</code> \u5C31\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u6D4F\u89C8\u5668\u6BCF\u6B21\u6E32\u67D3\u90FD\u4F1A\u6267\u884C\uFF0C\u4E0D\u7528\u81EA\u5DF1\u8BA1\u7B97\u65F6\u95F4\u3002</p><p>\u4EE3\u7801\u53C2\u8003 requestAnimationFrame.html</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>requestAnimationFrame<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">#box</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 3px solid #333<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>requestAnimationFrame<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>change<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;box&#39;</span><span class="token punctuation">)</span>
        
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;btn1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> curWidth <span class="token operator">=</span> <span class="token number">100</span>
            <span class="token keyword">const</span> maxWidth <span class="token operator">=</span> <span class="token number">400</span>

            <span class="token keyword">function</span> <span class="token function">addWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                curWidth <span class="token operator">=</span> curWidth <span class="token operator">+</span> <span class="token number">3</span>
                box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>curWidth<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">\`</span></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>curWidth <span class="token operator">&lt;</span> maxWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>addWidth<span class="token punctuation">)</span> <span class="token comment">// \u65F6\u95F4\u4E0D\u7528\u81EA\u5DF1\u63A7\u5236</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token function">addWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="requestidlecallback-\u7A7A\u95F2\u65F6\u624D\u6267\u884C-\u4F4E\u4F18" tabindex="-1"><a class="header-anchor" href="#requestidlecallback-\u7A7A\u95F2\u65F6\u624D\u6267\u884C-\u4F4E\u4F18" aria-hidden="true">#</a> requestIdleCallback \u7A7A\u95F2\u65F6\u624D\u6267\u884C\uFF0C\u4F4E\u4F18</h2><p>requestIdleCallback \u4F1A\u5728\u7F51\u9875\u6E32\u67D3\u5B8C\u6210\u540E\uFF0CCPU \u7A7A\u95F2\u65F6\u6267\u884C\uFF0C\u4E0D\u4E00\u5B9A\u6BCF\u4E00\u5E27\u90FD\u6267\u884C\u3002</p><p>requestIdleCallback \u4E0D\u9002\u5408\u6267\u884C DOM \u64CD\u4F5C\uFF0C\u56E0\u4E3A\u4FEE\u6539\u4E86 DOM \u4E4B\u540E\u4E0B\u4E00\u5E27\u4E0D\u4E00\u5B9A\u4F1A\u89E6\u53D1\u4FEE\u6539\u3002</p><h2 id="\u5B8F\u4EFB\u52A1" tabindex="-1"><a class="header-anchor" href="#\u5B8F\u4EFB\u52A1" aria-hidden="true">#</a> \u5B8F\u4EFB\u52A1</h2><p>requestAnimationFrame \u548C requestIdleCallback \u90FD\u662F\u5B8F\u4EFB\u52A1\uFF0C\u5B83\u4EEC\u6BD4 setTimeout \u66F4\u665A\u89E6\u53D1\u3002</p><h2 id="\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> \u4F7F\u7528\u573A\u666F</h2><p>requestAnimationFrame \u53EF\u7528\u4E8E\u7F51\u9875\u52A8\u753B\u3002</p><p>requestIdleCallback \u53EF\u7528\u4E8E\u4E00\u4E9B\u4F4E\u4F18\u5148\u7EA7\u7684\u573A\u666F\uFF0C\u4EE5\u4EE3\u66FF setTimeout \u3002\u4F8B\u5982\u53D1\u9001\u7EDF\u8BA1\u6570\u636E\u3002<br> \u4F46\u8BF7\u6CE8\u610F requestIdleCallback \u7684\u6D4F\u89C8\u5668\u517C\u5BB9\u6027</p><h2 id="\u7B54\u6848" tabindex="-1"><a class="header-anchor" href="#\u7B54\u6848" aria-hidden="true">#</a> \u7B54\u6848</h2><p>requestIdleCallback \u53EF\u5728\u7F51\u9875\u6E32\u67D3\u5B8C\u6210\u540E\uFF0CCPU \u7A7A\u95F2\u65F6\u6267\u884C\uFF0C\u7528\u4E8E\u4F4E\u4F18\u5148\u7EA7\u7684\u4EFB\u52A1\u5904\u7406\u3002</p>`,20);function p(e,c){return t}var l=n(s,[["render",p],["__file","08-requestIdleCallback.html.vue"]]);export{l as default};
