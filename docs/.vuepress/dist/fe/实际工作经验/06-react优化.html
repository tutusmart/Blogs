<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.45">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>React 优化 | </title><meta name="description" content="">
    <link rel="modulepreload" href="/../../assets/app.1c29f384.js"><link rel="modulepreload" href="/../../assets/06-react优化.html.69037ea4.js"><link rel="modulepreload" href="/../../assets/06-react优化.html.41815841.js"><link rel="prefetch" href="/../../assets/00-开始.html.401ad1be.js"><link rel="prefetch" href="/../../assets/index.html.55d5f821.js"><link rel="prefetch" href="/../../assets/00-开始.html.7e1c60de.js"><link rel="prefetch" href="/../../assets/01-数组转树.html.1712f18d.js"><link rel="prefetch" href="/../../assets/02-连环问-树转数组.html.7ab9adc8.js"><link rel="prefetch" href="/../../assets/03-map-parseInt.html.daf07073.js"><link rel="prefetch" href="/../../assets/04-原型.html.29f7657b.js"><link rel="prefetch" href="/../../assets/05-promise调用顺序.html.a5481b8c.js"><link rel="prefetch" href="/../../assets/06-react-setState.html.9e23b69a.js"><link rel="prefetch" href="/../../assets/07-对象赋值.html.6ab6dce8.js"><link rel="prefetch" href="/../../assets/08-对象属性赋值.html.ae746d8c.js"><link rel="prefetch" href="/../../assets/09-函数参数.html.588599e5.js"><link rel="prefetch" href="/../../assets/10-文本小节-解决问题的常见思路.html.e5acc621.js"><link rel="prefetch" href="/../../assets/11-总结.html.cb7a56fc.js"><link rel="prefetch" href="/../../assets/00-开始.html.e017b374.js"><link rel="prefetch" href="/../../assets/01-ajax-fetch-axios-区别.html.fe14a426.js"><link rel="prefetch" href="/../../assets/02-节流和防抖.html.36c8ffb4.js"><link rel="prefetch" href="/../../assets/03-px-em-rem-vw-vh-区别.html.9e633a7c.js"><link rel="prefetch" href="/../../assets/04-箭头函数的缺点.html.1361a5c7.js"><link rel="prefetch" href="/../../assets/05-TCP三次握手四次挥手.html.cf493a5e.js"><link rel="prefetch" href="/../../assets/06-for-in和for-of的区别.html.60d1b2e0.js"><link rel="prefetch" href="/../../assets/07-offsetHeight-scrollHeight-clientHeight-区别.html.8093e6d5.js"><link rel="prefetch" href="/../../assets/08-HTMLCollection-NodeList-区别.html.b9e2e409.js"><link rel="prefetch" href="/../../assets/09-vue-computed-watch-区别.html.0767ec0e.js"><link rel="prefetch" href="/../../assets/10-vue组件通讯.html.33d0e9ed.js"><link rel="prefetch" href="/../../assets/11-vuex-action-mutation-区别.html.99df2c4b.js"><link rel="prefetch" href="/../../assets/12-JS严格模式.html.7b6701b4.js"><link rel="prefetch" href="/../../assets/13-options请求.html.a33d543a.js"><link rel="prefetch" href="/../../assets/14-总结.html.0ae50710.js"><link rel="prefetch" href="/../../assets/x1-文本小节-前端知识体系.html.e03e18fd.js"><link rel="prefetch" href="/../../assets/x2-文本小节-Restful-API-method.html.5de536f6.js"><link rel="prefetch" href="/../../assets/00-开始.html.ffc6c071.js"><link rel="prefetch" href="/../../assets/01-旋转数组.html.e51643a6.js"><link rel="prefetch" href="/../../assets/02-括号匹配.html.91e869d8.js"><link rel="prefetch" href="/../../assets/03-用两个栈实现一个队列.html.6a5b7a8d.js"><link rel="prefetch" href="/../../assets/04-反转链表.html.e0b05786.js"><link rel="prefetch" href="/../../assets/05-二分查找.html.bb9f176b.js"><link rel="prefetch" href="/../../assets/06-两数之和.html.11c529e6.js"><link rel="prefetch" href="/../../assets/07-BST第K小值.html.a5b0ec42.js"><link rel="prefetch" href="/../../assets/08-为何二叉树重要.html.f0724cb8.js"><link rel="prefetch" href="/../../assets/09-斐波那契数列.html.8fdcb742.js"><link rel="prefetch" href="/../../assets/10-移动0.html.63c77321.js"><link rel="prefetch" href="/../../assets/11-连续最多的字符.html.0b6a1d70.js"><link rel="prefetch" href="/../../assets/12-快速排序.html.89b77b39.js"><link rel="prefetch" href="/../../assets/13-回文数字.html.aed5ced4.js"><link rel="prefetch" href="/../../assets/14-字符串前缀匹配.html.ea064180.js"><link rel="prefetch" href="/../../assets/15-数字千分位.html.d8cd3ef9.js"><link rel="prefetch" href="/../../assets/16-切换字母大小写.html.0beb2ca6.js"><link rel="prefetch" href="/../../assets/17-小数相加.html.5e8e72e4.js"><link rel="prefetch" href="/../../assets/18-总结.html.14b25272.js"><link rel="prefetch" href="/../../assets/x1-文本小节-常见数据结构.html.ec8ce38a.js"><link rel="prefetch" href="/../../assets/x2-文本小节-常见算法时间复杂度.html.e00af212.js"><link rel="prefetch" href="/../../assets/00-开始.html.9b49cf95.js"><link rel="prefetch" href="/../../assets/01-首屏优化.html.adf3f5bf.js"><link rel="prefetch" href="/../../assets/03-文本小节-用CSS实现文字超出省略.html.4bd2d1e8.js"><link rel="prefetch" href="/../../assets/04-设计模式.html.446b10fd.js"><link rel="prefetch" href="/../../assets/05-vue优化.html.38c63ef5.js"><link rel="prefetch" href="/../../assets/08-vue错误监听.html.350f1b38.js"><link rel="prefetch" href="/../../assets/09-react错误监听.html.fdf04e6a.js"><link rel="prefetch" href="/../../assets/10-排查性能问题.html.bf986010.js"><link rel="prefetch" href="/../../assets/11-项目难点.html.c6e0f1f2.js"><link rel="prefetch" href="/../../assets/12-文本小节-处理项目沟通冲突.html.30221816.js"><link rel="prefetch" href="/../../assets/13-总结.html.4234f9f5.js"><link rel="prefetch" href="/../../assets/00-开始.html.bad6c1ea.js"><link rel="prefetch" href="/../../assets/01-移动端click-300ms-延迟.html.6e7e1f7d.js"><link rel="prefetch" href="/../../assets/02-文本小节-Retina屏幕1px宽度.html.bee79c3f.js"><link rel="prefetch" href="/../../assets/03-token和cookie区别.html.a6931290.js"><link rel="prefetch" href="/../../assets/04-http-udp区别.html.f92b2d01.js"><link rel="prefetch" href="/../../assets/05-https中间人攻击.html.40b29d5f.js"><link rel="prefetch" href="/../../assets/05-忽略.html.788c74a6.js"><link rel="prefetch" href="/../../assets/06-defer和async.html.79174577.js"><link rel="prefetch" href="/../../assets/07-前端攻击.html.3ae53dfc.js"><link rel="prefetch" href="/../../assets/08-websocket.html.41c979ae.js"><link rel="prefetch" href="/../../assets/09-输入url到页面展示.html.abe0b551.js"><link rel="prefetch" href="/../../assets/10-网页多标签通讯.html.b3ce829a.js"><link rel="prefetch" href="/../../assets/11-koa2洋葱圈模型.html.0f4e028a.js"><link rel="prefetch" href="/../../assets/12-文本小节-为何需要nodejs.html.74e0a0cb.js"><link rel="prefetch" href="/../../assets/13-总结.html.c6e7d704.js"><link rel="prefetch" href="/../../assets/00-开始.html.26e0075c.js"><link rel="prefetch" href="/../../assets/01-JS内存泄漏.html.fd1f682b.js"><link rel="prefetch" href="/../../assets/02-浏览器和nodejs事件循环的区别.html.a0f345bf.js"><link rel="prefetch" href="/../../assets/03-忽略.html.3dcfe644.js"><link rel="prefetch" href="/../../assets/04-vdom真的很快吗.html.67193e94.js"><link rel="prefetch" href="/../../assets/05-for-vs-forEach copy.html.1882bed3.js"><link rel="prefetch" href="/../../assets/05-for-vs-forEach.html.56a945fe.js"><link rel="prefetch" href="/../../assets/06-nodejs多进程.html.3b79f397.js"><link rel="prefetch" href="/../../assets/07-js-bridge原理.html.abdf4e3c.js"><link rel="prefetch" href="/../../assets/08-requestIdleCallback.html.b6a33b78.js"><link rel="prefetch" href="/../../assets/09-Vue生命周期.html.7fe73a54.js"><link rel="prefetch" href="/../../assets/10-vue-react-diff.html.da3c48e6.js"><link rel="prefetch" href="/../../assets/11-vue-router-模式.html.58311f29.js"><link rel="prefetch" href="/../../assets/12-总结.html.2ae270c8.js"><link rel="prefetch" href="/../../assets/x1-文本小节-知识深度很重要.html.e78e8b64.js"><link rel="prefetch" href="/../../assets/00-开始.html.b896ae8d.js"><link rel="prefetch" href="/../../assets/01-文本小节-高质量代码的特点.html.cf69958a.js"><link rel="prefetch" href="/../../assets/02-array-flatten.html.4676fa53.js"><link rel="prefetch" href="/../../assets/03-类型判断.html.96093970.js"><link rel="prefetch" href="/../../assets/04-手写new.html.0206c7c7.js"><link rel="prefetch" href="/../../assets/05-遍历DOM树.html.e01c9835.js"><link rel="prefetch" href="/../../assets/06-手写lazyman.html.e3541f4b.js"><link rel="prefetch" href="/../../assets/07-curry-add.html.6674c94a.js"><link rel="prefetch" href="/../../assets/08-手写instanceof.html.c6df827f.js"><link rel="prefetch" href="/../../assets/09-手写函数bind.html.481c878e.js"><link rel="prefetch" href="/../../assets/10-手写event-bus.html.48380119.js"><link rel="prefetch" href="/../../assets/11-手写LRU.html.c62460c6.js"><link rel="prefetch" href="/../../assets/12-深拷贝.html.d597ca8a.js"><link rel="prefetch" href="/../../assets/13-文本小节-dom转vdom.html.f9a87ced.js"><link rel="prefetch" href="/../../assets/14-总结.html.9d9d5acf.js"><link rel="prefetch" href="/../../assets/00-开始.html.f7c9ef9a.js"><link rel="prefetch" href="/../../assets/01-是否看过红宝书.html.31b1112a.js"><link rel="prefetch" href="/../../assets/02-如何做code-review.html.ecdcde98.js"><link rel="prefetch" href="/../../assets/03-如何学习一门新语言.html.92d457c9.js"><link rel="prefetch" href="/../../assets/04-你目前有和不足.html.7f3bec97.js"><link rel="prefetch" href="/../../assets/05-总结.html.8c632236.js"><link rel="prefetch" href="/../../assets/00-开始.html.fe88d44f.js"><link rel="prefetch" href="/../../assets/01-文本小节-项目负责人的职责.html.4c4b8113.js"><link rel="prefetch" href="/../../assets/02-忽略.html.91b2ef37.js"><link rel="prefetch" href="/../../assets/03-前端统计sdk.html.0e7a133c.js"><link rel="prefetch" href="/../../assets/04-SPA-MPA.html.f89cc0b8.js"><link rel="prefetch" href="/../../assets/05-H5编辑器.html.c0b2b8e8.js"><link rel="prefetch" href="/../../assets/06-文本小节-何时使用SSR.html.5ce011d2.js"><link rel="prefetch" href="/../../assets/07-角色权限模型.html.49cb6393.js"><link rel="prefetch" href="/../../assets/08-hybrid更新机制.html.37694a77.js"><link rel="prefetch" href="/../../assets/09-H5抽奖页.html.18e839d7.js"><link rel="prefetch" href="/../../assets/10-技术选型.html.c75bf1ed.js"><link rel="prefetch" href="/../../assets/11-图片懒加载.html.cae0a2e4.js"><link rel="prefetch" href="/../../assets/12-文本小节-B端-C端.html.92911fba.js"><link rel="prefetch" href="/../../assets/13-总结.html.9b149fe8.js"><link rel="prefetch" href="/../../assets/404.html.f166316b.js"><link rel="prefetch" href="/../../assets/00-开始.html.216a80c1.js"><link rel="prefetch" href="/../../assets/index.html.f32c2a15.js"><link rel="prefetch" href="/../../assets/00-开始.html.55d2db2a.js"><link rel="prefetch" href="/../../assets/01-数组转树.html.2dd1998d.js"><link rel="prefetch" href="/../../assets/02-连环问-树转数组.html.50ab622b.js"><link rel="prefetch" href="/../../assets/03-map-parseInt.html.ecf501c4.js"><link rel="prefetch" href="/../../assets/04-原型.html.eb89523d.js"><link rel="prefetch" href="/../../assets/05-promise调用顺序.html.64af2fbd.js"><link rel="prefetch" href="/../../assets/06-react-setState.html.bfbad757.js"><link rel="prefetch" href="/../../assets/07-对象赋值.html.92ea7e48.js"><link rel="prefetch" href="/../../assets/08-对象属性赋值.html.258bbafb.js"><link rel="prefetch" href="/../../assets/09-函数参数.html.04624701.js"><link rel="prefetch" href="/../../assets/10-文本小节-解决问题的常见思路.html.577be705.js"><link rel="prefetch" href="/../../assets/11-总结.html.ab229d98.js"><link rel="prefetch" href="/../../assets/00-开始.html.1ed56ef2.js"><link rel="prefetch" href="/../../assets/01-ajax-fetch-axios-区别.html.4a4ffd2d.js"><link rel="prefetch" href="/../../assets/02-节流和防抖.html.7d28d22f.js"><link rel="prefetch" href="/../../assets/03-px-em-rem-vw-vh-区别.html.debfb19f.js"><link rel="prefetch" href="/../../assets/04-箭头函数的缺点.html.575713b2.js"><link rel="prefetch" href="/../../assets/05-TCP三次握手四次挥手.html.f978247a.js"><link rel="prefetch" href="/../../assets/06-for-in和for-of的区别.html.e339c80c.js"><link rel="prefetch" href="/../../assets/07-offsetHeight-scrollHeight-clientHeight-区别.html.f8b5474d.js"><link rel="prefetch" href="/../../assets/08-HTMLCollection-NodeList-区别.html.9d35b0f7.js"><link rel="prefetch" href="/../../assets/09-vue-computed-watch-区别.html.6b1aa8f1.js"><link rel="prefetch" href="/../../assets/10-vue组件通讯.html.b1ab4559.js"><link rel="prefetch" href="/../../assets/11-vuex-action-mutation-区别.html.b7ab44b0.js"><link rel="prefetch" href="/../../assets/12-JS严格模式.html.94d8b63c.js"><link rel="prefetch" href="/../../assets/13-options请求.html.2a11a3d0.js"><link rel="prefetch" href="/../../assets/14-总结.html.4f9d4624.js"><link rel="prefetch" href="/../../assets/x1-文本小节-前端知识体系.html.9230b065.js"><link rel="prefetch" href="/../../assets/x2-文本小节-Restful-API-method.html.1b9cb8d8.js"><link rel="prefetch" href="/../../assets/00-开始.html.79792849.js"><link rel="prefetch" href="/../../assets/01-旋转数组.html.b0d3b03c.js"><link rel="prefetch" href="/../../assets/02-括号匹配.html.33960fc6.js"><link rel="prefetch" href="/../../assets/03-用两个栈实现一个队列.html.4378d836.js"><link rel="prefetch" href="/../../assets/04-反转链表.html.73c2c729.js"><link rel="prefetch" href="/../../assets/05-二分查找.html.280d6ab1.js"><link rel="prefetch" href="/../../assets/06-两数之和.html.e921102f.js"><link rel="prefetch" href="/../../assets/07-BST第K小值.html.f804b99d.js"><link rel="prefetch" href="/../../assets/08-为何二叉树重要.html.45e15b6f.js"><link rel="prefetch" href="/../../assets/09-斐波那契数列.html.23ce806c.js"><link rel="prefetch" href="/../../assets/10-移动0.html.09e8201a.js"><link rel="prefetch" href="/../../assets/11-连续最多的字符.html.68bda589.js"><link rel="prefetch" href="/../../assets/12-快速排序.html.e0303bf0.js"><link rel="prefetch" href="/../../assets/13-回文数字.html.657813e1.js"><link rel="prefetch" href="/../../assets/14-字符串前缀匹配.html.d1e98744.js"><link rel="prefetch" href="/../../assets/15-数字千分位.html.00e8c531.js"><link rel="prefetch" href="/../../assets/16-切换字母大小写.html.a8dcec8f.js"><link rel="prefetch" href="/../../assets/17-小数相加.html.da54ad60.js"><link rel="prefetch" href="/../../assets/18-总结.html.9bb16baa.js"><link rel="prefetch" href="/../../assets/x1-文本小节-常见数据结构.html.a1f6f6aa.js"><link rel="prefetch" href="/../../assets/x2-文本小节-常见算法时间复杂度.html.5fa73a84.js"><link rel="prefetch" href="/../../assets/00-开始.html.7317b377.js"><link rel="prefetch" href="/../../assets/01-首屏优化.html.8434283e.js"><link rel="prefetch" href="/../../assets/03-文本小节-用CSS实现文字超出省略.html.b20854bf.js"><link rel="prefetch" href="/../../assets/04-设计模式.html.4c36859d.js"><link rel="prefetch" href="/../../assets/05-vue优化.html.86402fb0.js"><link rel="prefetch" href="/../../assets/08-vue错误监听.html.661163f9.js"><link rel="prefetch" href="/../../assets/09-react错误监听.html.00213abe.js"><link rel="prefetch" href="/../../assets/10-排查性能问题.html.9878b6b7.js"><link rel="prefetch" href="/../../assets/11-项目难点.html.d8816d7c.js"><link rel="prefetch" href="/../../assets/12-文本小节-处理项目沟通冲突.html.d051bfb7.js"><link rel="prefetch" href="/../../assets/13-总结.html.7b216c75.js"><link rel="prefetch" href="/../../assets/00-开始.html.94aece5f.js"><link rel="prefetch" href="/../../assets/01-移动端click-300ms-延迟.html.829a8fd9.js"><link rel="prefetch" href="/../../assets/02-文本小节-Retina屏幕1px宽度.html.42c93187.js"><link rel="prefetch" href="/../../assets/03-token和cookie区别.html.832f0879.js"><link rel="prefetch" href="/../../assets/04-http-udp区别.html.047376e7.js"><link rel="prefetch" href="/../../assets/05-https中间人攻击.html.ea155ac7.js"><link rel="prefetch" href="/../../assets/05-忽略.html.a55de0bb.js"><link rel="prefetch" href="/../../assets/06-defer和async.html.ba80424a.js"><link rel="prefetch" href="/../../assets/07-前端攻击.html.65099284.js"><link rel="prefetch" href="/../../assets/08-websocket.html.1b9871b9.js"><link rel="prefetch" href="/../../assets/09-输入url到页面展示.html.237da931.js"><link rel="prefetch" href="/../../assets/10-网页多标签通讯.html.a6cda875.js"><link rel="prefetch" href="/../../assets/11-koa2洋葱圈模型.html.8904a051.js"><link rel="prefetch" href="/../../assets/12-文本小节-为何需要nodejs.html.cadf8833.js"><link rel="prefetch" href="/../../assets/13-总结.html.acdb27d3.js"><link rel="prefetch" href="/../../assets/00-开始.html.bdf3f824.js"><link rel="prefetch" href="/../../assets/01-JS内存泄漏.html.40ff32b9.js"><link rel="prefetch" href="/../../assets/02-浏览器和nodejs事件循环的区别.html.6eec4aa1.js"><link rel="prefetch" href="/../../assets/03-忽略.html.2417bacb.js"><link rel="prefetch" href="/../../assets/04-vdom真的很快吗.html.c652d492.js"><link rel="prefetch" href="/../../assets/05-for-vs-forEach copy.html.bb7587a7.js"><link rel="prefetch" href="/../../assets/05-for-vs-forEach.html.1da64619.js"><link rel="prefetch" href="/../../assets/06-nodejs多进程.html.1a5f2367.js"><link rel="prefetch" href="/../../assets/07-js-bridge原理.html.940a5b81.js"><link rel="prefetch" href="/../../assets/08-requestIdleCallback.html.140d5a4e.js"><link rel="prefetch" href="/../../assets/09-Vue生命周期.html.fa6f3ffb.js"><link rel="prefetch" href="/../../assets/10-vue-react-diff.html.a345a786.js"><link rel="prefetch" href="/../../assets/11-vue-router-模式.html.352c095f.js"><link rel="prefetch" href="/../../assets/12-总结.html.e975ee96.js"><link rel="prefetch" href="/../../assets/x1-文本小节-知识深度很重要.html.68b034e4.js"><link rel="prefetch" href="/../../assets/00-开始.html.bc811922.js"><link rel="prefetch" href="/../../assets/01-文本小节-高质量代码的特点.html.09ea9f2f.js"><link rel="prefetch" href="/../../assets/02-array-flatten.html.894d7194.js"><link rel="prefetch" href="/../../assets/03-类型判断.html.697040dd.js"><link rel="prefetch" href="/../../assets/04-手写new.html.3c5b3aee.js"><link rel="prefetch" href="/../../assets/05-遍历DOM树.html.789f2294.js"><link rel="prefetch" href="/../../assets/06-手写lazyman.html.5d8cb146.js"><link rel="prefetch" href="/../../assets/07-curry-add.html.07a5770d.js"><link rel="prefetch" href="/../../assets/08-手写instanceof.html.b96cd338.js"><link rel="prefetch" href="/../../assets/09-手写函数bind.html.39f28b24.js"><link rel="prefetch" href="/../../assets/10-手写event-bus.html.7a53789f.js"><link rel="prefetch" href="/../../assets/11-手写LRU.html.f503ed27.js"><link rel="prefetch" href="/../../assets/12-深拷贝.html.cbf95b73.js"><link rel="prefetch" href="/../../assets/13-文本小节-dom转vdom.html.7ed54910.js"><link rel="prefetch" href="/../../assets/14-总结.html.c1e91607.js"><link rel="prefetch" href="/../../assets/00-开始.html.81e66e0b.js"><link rel="prefetch" href="/../../assets/01-是否看过红宝书.html.2bbe4b50.js"><link rel="prefetch" href="/../../assets/02-如何做code-review.html.cf609d01.js"><link rel="prefetch" href="/../../assets/03-如何学习一门新语言.html.fc4fe1e7.js"><link rel="prefetch" href="/../../assets/04-你目前有和不足.html.df59cf36.js"><link rel="prefetch" href="/../../assets/05-总结.html.60ca4f95.js"><link rel="prefetch" href="/../../assets/00-开始.html.9e070467.js"><link rel="prefetch" href="/../../assets/01-文本小节-项目负责人的职责.html.5eb0e3a8.js"><link rel="prefetch" href="/../../assets/02-忽略.html.e94fc134.js"><link rel="prefetch" href="/../../assets/03-前端统计sdk.html.ec4645a8.js"><link rel="prefetch" href="/../../assets/04-SPA-MPA.html.c5ebf0da.js"><link rel="prefetch" href="/../../assets/05-H5编辑器.html.c852d965.js"><link rel="prefetch" href="/../../assets/06-文本小节-何时使用SSR.html.af4f7135.js"><link rel="prefetch" href="/../../assets/07-角色权限模型.html.f512c5c0.js"><link rel="prefetch" href="/../../assets/08-hybrid更新机制.html.73cafd36.js"><link rel="prefetch" href="/../../assets/09-H5抽奖页.html.4979af3e.js"><link rel="prefetch" href="/../../assets/10-技术选型.html.ae9829bf.js"><link rel="prefetch" href="/../../assets/11-图片懒加载.html.2a03bb17.js"><link rel="prefetch" href="/../../assets/12-文本小节-B端-C端.html.e92c79b7.js"><link rel="prefetch" href="/../../assets/13-总结.html.97ecc5c8.js"><link rel="prefetch" href="/../../assets/404.html.7f8155c7.js"><link rel="prefetch" href="/../../assets/404.30efacbe.js"><link rel="prefetch" href="/../../assets/Layout.a6e7ecbf.js">
    <link rel="stylesheet" href="/../../assets/style.f28eb729.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/../../" class=""><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><!----></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><!----></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">前端基础知识 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/前端基础知识/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/01-ajax-fetch-axios-区别.md" class="sidebar-item" aria-label="01-ajax-fetch-axios-区别"><!--[--><!--]--> 01-ajax-fetch-axios-区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/02-节流和防抖.md" class="sidebar-item" aria-label="02-节流和防抖"><!--[--><!--]--> 02-节流和防抖 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/03-px-em-rem-vw-vh-区别.md" class="sidebar-item" aria-label="03-px-em-rem-vw-vh-区别"><!--[--><!--]--> 03-px-em-rem-vw-vh-区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/04-箭头函数的缺点.md" class="sidebar-item" aria-label="04-箭头函数的缺点"><!--[--><!--]--> 04-箭头函数的缺点 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/05-TCP三次握手四次挥手.md" class="sidebar-item" aria-label="05-TCP三次握手四次挥手"><!--[--><!--]--> 05-TCP三次握手四次挥手 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/06-for-in和for-of的区别.md" class="sidebar-item" aria-label="06-for-in和for-of的区别"><!--[--><!--]--> 06-for-in和for-of的区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/07-offsetHeight-scrollHeight-clientHeight-区别.md" class="sidebar-item" aria-label="07-offsetHeight-scrollHeight-clientHeight-区别"><!--[--><!--]--> 07-offsetHeight-scrollHeight-clientHeight-区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/08-HTMLCollection-NodeList-区别.md" class="sidebar-item" aria-label="08-HTMLCollection-NodeList-区别"><!--[--><!--]--> 08-HTMLCollection-NodeList-区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/09-vue-computed-watch-区别.md" class="sidebar-item" aria-label="09-vue-computed-watch-区别"><!--[--><!--]--> 09-vue-computed-watch-区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/10-vue组件通讯.md" class="sidebar-item" aria-label="10-vue组件通讯"><!--[--><!--]--> 10-vue组件通讯 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/11-vuex-action-mutation-区别.md" class="sidebar-item" aria-label="11-vuex-action-mutation-区别"><!--[--><!--]--> 11-vuex-action-mutation-区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/12-JS严格模式.md" class="sidebar-item" aria-label="12-JS严格模式"><!--[--><!--]--> 12-JS严格模式 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/13-options请求.md" class="sidebar-item" aria-label="13-options请求"><!--[--><!--]--> 13-options请求 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/14-总结.md" class="sidebar-item" aria-label="14-总结"><!--[--><!--]--> 14-总结 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/x1-文本小节-前端知识体系.md" class="sidebar-item" aria-label="x1-文本小节-前端知识体系"><!--[--><!--]--> x1-文本小节-前端知识体系 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/前端基础知识/x2-文本小节-Restful-API-method.md" class="sidebar-item" aria-label="x2-文本小节-Restful-API-method"><!--[--><!--]--> x2-文本小节-Restful-API-method <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">数据结构和算法 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/数据结构和算法/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/01-旋转数组.md" class="sidebar-item" aria-label="01-旋转数组"><!--[--><!--]--> 01-旋转数组 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/02-括号匹配.md" class="sidebar-item" aria-label="02-括号匹配"><!--[--><!--]--> 02-括号匹配 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/03-用两个栈实现一个队列.md" class="sidebar-item" aria-label="03-用两个栈实现一个队列.md"><!--[--><!--]--> 03-用两个栈实现一个队列.md <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/04-反转链表.md" class="sidebar-item" aria-label="04-反转链表"><!--[--><!--]--> 04-反转链表 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/05-二分查找.md" class="sidebar-item" aria-label="05-二分查找"><!--[--><!--]--> 05-二分查找 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/06-两数之和.md" class="sidebar-item" aria-label="06-两数之和"><!--[--><!--]--> 06-两数之和 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/07-BST第K小值.md" class="sidebar-item" aria-label="07-BST第K小值"><!--[--><!--]--> 07-BST第K小值 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/08-为何二叉树重要.md" class="sidebar-item" aria-label="08-为何二叉树重要.md"><!--[--><!--]--> 08-为何二叉树重要.md <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/09-斐波那契数列.md" class="sidebar-item" aria-label="09-斐波那契数列"><!--[--><!--]--> 09-斐波那契数列 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/10-移动0.md" class="sidebar-item" aria-label="10-移动0"><!--[--><!--]--> 10-移动0 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/11-连续最多的字符.md" class="sidebar-item" aria-label="11-连续最多的字符.md"><!--[--><!--]--> 11-连续最多的字符.md <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/12-快速排序.md" class="sidebar-item" aria-label="12-快速排序"><!--[--><!--]--> 12-快速排序 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/13-options请求.md" class="sidebar-item" aria-label="13-options请求"><!--[--><!--]--> 13-options请求 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/14-字符串前缀匹配.md" class="sidebar-item" aria-label="14-字符串前缀匹配"><!--[--><!--]--> 14-字符串前缀匹配 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/15-数字千分位.md" class="sidebar-item" aria-label="15-数字千分位"><!--[--><!--]--> 15-数字千分位 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/16-切换字母大小写.md" class="sidebar-item" aria-label="16-切换字母大小写"><!--[--><!--]--> 16-切换字母大小写 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/17-小数相加.md" class="sidebar-item" aria-label="17-小数相加"><!--[--><!--]--> 17-小数相加 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/18-总结.md" class="sidebar-item" aria-label="18-总结"><!--[--><!--]--> 18-总结 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/x1-文本小节-常见数据结构.md" class="sidebar-item" aria-label="x1-文本小节-常见数据结构"><!--[--><!--]--> x1-文本小节-常见数据结构 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/数据结构和算法/x2-文本小节-常见算法时间复杂度.md" class="sidebar-item" aria-label="x2-文本小节-常见算法时间复杂度"><!--[--><!--]--> x2-文本小节-常见算法时间复杂度 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">知识广度 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/知识广度/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/01-移动端click-300ms-延迟.md" class="sidebar-item" aria-label="01-移动端click-300ms-延迟"><!--[--><!--]--> 01-移动端click-300ms-延迟 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/02-文本小节-Retina屏幕1px宽度.md" class="sidebar-item" aria-label="02-文本小节-Retina屏幕1px宽度"><!--[--><!--]--> 02-文本小节-Retina屏幕1px宽度 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/03-token和cookie区别.md" class="sidebar-item" aria-label="03-token和cookie区别"><!--[--><!--]--> 03-token和cookie区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/04-http-udp区别.md" class="sidebar-item" aria-label="04-http-udp区别"><!--[--><!--]--> 04-http-udp区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/05-https中间人攻击.md" class="sidebar-item" aria-label="05-https中间人攻击"><!--[--><!--]--> 05-https中间人攻击 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/06-defer和async.md" class="sidebar-item" aria-label="06-defer和async"><!--[--><!--]--> 06-defer和async <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/07-前端攻击.md" class="sidebar-item" aria-label="07-前端攻击"><!--[--><!--]--> 07-前端攻击 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/08-websocket.md" class="sidebar-item" aria-label="08-websocket"><!--[--><!--]--> 08-websocket <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/09-输入url到页面展示.md" class="sidebar-item" aria-label="09-输入url到页面展示"><!--[--><!--]--> 09-输入url到页面展示 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/10-网页多标签通讯.md" class="sidebar-item" aria-label="10-网页多标签通讯"><!--[--><!--]--> 10-网页多标签通讯 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/11-koa2洋葱圈模型.md" class="sidebar-item" aria-label="11-koa2洋葱圈模型"><!--[--><!--]--> 11-koa2洋葱圈模型 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/12-文本小节-为何需要nodejs.md" class="sidebar-item" aria-label="12-文本小节-为何需要nodejs"><!--[--><!--]--> 12-文本小节-为何需要nodejs <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/13-总结.md" class="sidebar-item" aria-label="13-总结"><!--[--><!--]--> 13-总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">知识深度 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/知识深度/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/01-JS内存泄漏.md" class="sidebar-item" aria-label="01-JS内存泄漏"><!--[--><!--]--> 01-JS内存泄漏 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/02-浏览器和nodejs事件循环的区别.md" class="sidebar-item" aria-label="02-浏览器和nodejs事件循环的区别"><!--[--><!--]--> 02-浏览器和nodejs事件循环的区别 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/04-vdom真的很快吗.md" class="sidebar-item" aria-label="04-vdom真的很快吗"><!--[--><!--]--> 04-vdom真的很快吗 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/05-for-vs-forEach.md" class="sidebar-item" aria-label="05-for-vs-forEach"><!--[--><!--]--> 05-for-vs-forEach <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/06-nodejs多进程.md" class="sidebar-item" aria-label="06-nodejs多进程"><!--[--><!--]--> 06-nodejs多进程 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/07-js-bridge原理.md" class="sidebar-item" aria-label="07-js-bridge原理"><!--[--><!--]--> 07-js-bridge原理 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/08-requestIdleCallback.md" class="sidebar-item" aria-label="08-requestIdleCallback.md"><!--[--><!--]--> 08-requestIdleCallback.md <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识深度/09-Vue生命周期.md" class="sidebar-item" aria-label="09-Vue生命周期"><!--[--><!--]--> 09-Vue生命周期 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/10-vue-react-diff.md" class="sidebar-item" aria-label="10-vue-react-diff"><!--[--><!--]--> 10-vue-react-diff <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/11-vue-router-模式.md" class="sidebar-item" aria-label="11-vue-router-模式"><!--[--><!--]--> 11-vue-router-模式 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/12-总结.md" class="sidebar-item" aria-label="12-总结"><!--[--><!--]--> 12-总结 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/知识广度/x1-文本小节-知识深度很重要.md" class="sidebar-item" aria-label="x1-文本小节-知识深度很重要"><!--[--><!--]--> x1-文本小节-知识深度很重要 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">软技能 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/软技能/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/软技能/01-是否看过红宝书.md" class="sidebar-item" aria-label="01-是否看过红宝书"><!--[--><!--]--> 01-是否看过红宝书 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/软技能/02-如何做code-review.md" class="sidebar-item" aria-label="02-如何做code-review"><!--[--><!--]--> 02-如何做code-review <!--[--><!--]--></a><!----></li><li><a href="/../../fe/软技能/03-如何学习一门新语言.md" class="sidebar-item" aria-label="03-如何学习一门新语言"><!--[--><!--]--> 03-如何学习一门新语言 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/软技能/04-你目前有和不足.md" class="sidebar-item" aria-label="04-你目前有和不足"><!--[--><!--]--> 04-你目前有和不足 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/软技能/05-总结.md" class="sidebar-item" aria-label="05-总结"><!--[--><!--]--> 05-总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">实际工作经验 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/../../fe/实际工作经验/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/01-首屏优化.md" class="sidebar-item" aria-label="01-首屏优化"><!--[--><!--]--> 01-首屏优化 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/02-渲染10w条数据.md" class="sidebar-item" aria-label="02-渲染10w条数据"><!--[--><!--]--> 02-渲染10w条数据 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/03-文本小节-用CSS实现文字超出省略.md" class="sidebar-item" aria-label="03-文本小节-用CSS实现文字超出省略"><!--[--><!--]--> 03-文本小节-用CSS实现文字超出省略 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/04-设计模式.md" class="sidebar-item" aria-label="04-设计模式"><!--[--><!--]--> 04-设计模式 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/05-vue优化.md" class="sidebar-item" aria-label="05-vue优化"><!--[--><!--]--> 05-vue优化 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/06-react优化.md" class="sidebar-item active" aria-label="06-react优化"><!--[--><!--]--> 06-react优化 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/08-vue错误监听.md" class="sidebar-item" aria-label="08-vue错误监听"><!--[--><!--]--> 08-vue错误监听 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/09-react错误监听.md" class="sidebar-item" aria-label="09-react错误监听"><!--[--><!--]--> 09-react错误监听 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/10-排查性能问题.md" class="sidebar-item" aria-label="10-排查性能问题"><!--[--><!--]--> 10-排查性能问题 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/11-项目难点.md" class="sidebar-item" aria-label="11-项目难点"><!--[--><!--]--> 11-项目难点 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/12-文本小节-处理项目沟通冲突.md" class="sidebar-item" aria-label="12-文本小节-处理项目沟通冲突"><!--[--><!--]--> 12-文本小节-处理项目沟通冲突 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/实际工作经验/13-总结.md" class="sidebar-item" aria-label="13-总结"><!--[--><!--]--> 13-总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">编写高质量代码 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/编写高质量代码/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/01-文本小节-高质量代码的特点.md" class="sidebar-item" aria-label="01-文本小节-高质量代码的特点"><!--[--><!--]--> 01-文本小节-高质量代码的特点 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/02-array-flatten.md" class="sidebar-item" aria-label="02-array-flatten"><!--[--><!--]--> 02-array-flatten <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/03-类型判断.md" class="sidebar-item" aria-label="03-类型判断"><!--[--><!--]--> 03-类型判断 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/04-手写new.md" class="sidebar-item" aria-label="04-手写new"><!--[--><!--]--> 04-手写new <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/05-遍历DOM树.md" class="sidebar-item" aria-label="05-遍历DOM树"><!--[--><!--]--> 05-遍历DOM树 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/06-手写lazyman.md" class="sidebar-item" aria-label="06-手写lazyman"><!--[--><!--]--> 06-手写lazyman <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/07-curry-add.md" class="sidebar-item" aria-label="07-curry-add"><!--[--><!--]--> 07-curry-add <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/08-手写instanceof.md" class="sidebar-item" aria-label="08-手写instanceof"><!--[--><!--]--> 08-手写instanceof <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/09-手写函数bind.md" class="sidebar-item" aria-label="09-手写函数bind"><!--[--><!--]--> 09-手写函数bind <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/10-手写event-bus.md" class="sidebar-item" aria-label="10-手写event-bus"><!--[--><!--]--> 10-手写event-bus <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/11-手写LRU.md" class="sidebar-item" aria-label="11-手写LRU"><!--[--><!--]--> 11-手写LRU <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/12-深拷贝.md" class="sidebar-item" aria-label="12-深拷贝"><!--[--><!--]--> 12-深拷贝 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/13-文本小节-dom转vdom.md" class="sidebar-item" aria-label="13-文本小节-dom转vdom"><!--[--><!--]--> 13-文本小节-dom转vdom <!--[--><!--]--></a><!----></li><li><a href="/../../fe/编写高质量代码/14-总结.md" class="sidebar-item" aria-label="14-总结"><!--[--><!--]--> 14-总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">分析解决问题 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/分析解决问题/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/01-数组转树.md" class="sidebar-item" aria-label="01-数组转树"><!--[--><!--]--> 01-数组转树 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/02-连环问-树转数组.md" class="sidebar-item" aria-label="02-连环问-树转数组"><!--[--><!--]--> 02-连环问-树转数组 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/03-map-parseInt.md" class="sidebar-item" aria-label="03-map-parseInt"><!--[--><!--]--> 03-map-parseInt <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/04-原型.md" class="sidebar-item" aria-label="04-原型"><!--[--><!--]--> 04-原型 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/05-promise调用顺序.md" class="sidebar-item" aria-label="05-promise调用顺序"><!--[--><!--]--> 05-promise调用顺序 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/06-react-setState.md" class="sidebar-item" aria-label="06-react-setState"><!--[--><!--]--> 06-react-setState <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/07-对象赋值.md" class="sidebar-item" aria-label="07-对象赋值"><!--[--><!--]--> 07-对象赋值 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/08-对象属性赋值.md" class="sidebar-item" aria-label="08-对象属性赋值"><!--[--><!--]--> 08-对象属性赋值 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/09-函数参数.md" class="sidebar-item" aria-label="09-函数参数"><!--[--><!--]--> 09-函数参数 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/10-文本小节-解决问题的常见思路.md" class="sidebar-item" aria-label="10-文本小节-解决问题的常见思路"><!--[--><!--]--> 10-文本小节-解决问题的常见思路 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/分析解决问题/11-总结.md" class="sidebar-item" aria-label="11-总结"><!--[--><!--]--> 11-总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">项目设计 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/../../fe/项目设计/00-开始.md" class="sidebar-item" aria-label="00-开始"><!--[--><!--]--> 00-开始 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/01-文本小节-项目负责人的职责.md" class="sidebar-item" aria-label="01-文本小节-项目负责人的职责"><!--[--><!--]--> 01-文本小节-项目负责人的职责 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/03-前端统计sdk.md" class="sidebar-item" aria-label="03-前端统计sdk"><!--[--><!--]--> 03-前端统计sdk <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/04-SPA-MPA.md" class="sidebar-item" aria-label="04-SPA-MPA"><!--[--><!--]--> 04-SPA-MPA <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/05-H5编辑器.md" class="sidebar-item" aria-label="05-H5编辑器"><!--[--><!--]--> 05-H5编辑器 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/06-文本小节-何时使用SSR.md" class="sidebar-item" aria-label="06-文本小节-何时使用SSR"><!--[--><!--]--> 06-文本小节-何时使用SSR <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/07-角色权限模型.md" class="sidebar-item" aria-label="07-角色权限模型"><!--[--><!--]--> 07-角色权限模型 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/08-hybrid更新机制.md" class="sidebar-item" aria-label="08-hybrid更新机制"><!--[--><!--]--> 08-hybrid更新机制 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/09-H5抽奖页.md" class="sidebar-item" aria-label="09-H5抽奖页"><!--[--><!--]--> 09-H5抽奖页 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/10-技术选型.md" class="sidebar-item" aria-label="10-技术选型"><!--[--><!--]--> 10-技术选型 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/11-图片懒加载.md" class="sidebar-item" aria-label="11-图片懒加载"><!--[--><!--]--> 11-图片懒加载 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/12-文本小节-B端-C端.md" class="sidebar-item" aria-label="12-文本小节-B端-C端"><!--[--><!--]--> 12-文本小节-B端-C端 <!--[--><!--]--></a><!----></li><li><a href="/../../fe/项目设计/13-总结.md" class="sidebar-item" aria-label="13-总结.md"><!--[--><!--]--> 13-总结.md <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="react-优化" tabindex="-1"><a class="header-anchor" href="#react-优化" aria-hidden="true">#</a> React 优化</h1><h2 id="题目" tabindex="-1"><a class="header-anchor" href="#题目" aria-hidden="true">#</a> 题目</h2><p>你在实际工作中，做过哪些 React 优化？</p><h2 id="前端通用的优化策略" tabindex="-1"><a class="header-anchor" href="#前端通用的优化策略" aria-hidden="true">#</a> 前端通用的优化策略</h2><p>压缩资源，拆包，使用 CDN ，http 缓存等。本节只讨论首屏，这些先不讲。</p><h2 id="循环使用-key" tabindex="-1"><a class="header-anchor" href="#循环使用-key" aria-hidden="true">#</a> 循环使用 key</h2><p><code>key</code> 可以优化内部的 diff 算法。注意，遍历数组时 <code>key</code> 不要使用 <code>index</code> 。</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> todoItems <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token punctuation">{</span><span class="token comment">/* key 不要用 index */</span><span class="token punctuation">}</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改-css-模拟-v-show" tabindex="-1"><a class="header-anchor" href="#修改-css-模拟-v-show" aria-hidden="true">#</a> 修改 css 模拟 <code>v-show</code></h2><p>条件渲染时，可以通过设置 css 来处理显示和隐藏，不用非得销毁组件。模拟 Vue <code>v-show</code></p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 模拟 v-show */</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">!</span>flag <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>flag <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 模拟 v-show */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">display</span><span class="token operator">:</span> flag <span class="token operator">?</span> <span class="token string">&#39;block&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用-fragment-减少层级" tabindex="-1"><a class="header-anchor" href="#使用-fragment-减少层级" aria-hidden="true">#</a> 使用 Fragment 减少层级</h2><p>组件层级过多，如果每个组件都以 <code>&lt;div&gt;</code> 作为 root ，则 DOM 层级太多而难以调试。</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="jsx-中不要定义函数" tabindex="-1"><a class="header-anchor" href="#jsx-中不要定义函数" aria-hidden="true">#</a> JSX 中不要定义函数</h2><p>JSX 是一个语法糖，它和 Vue template 一样，最终将变为 JS render 函数，用以生成 vnode 。<br> 所以，如果在 JSX 中定义函数，那么每次组件更新时都会初始化该函数，这是一个不必要的开销。<br> 可回顾之前的面试题： <code>for 和 forEach 哪个更快</code></p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* Bad */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点击</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>更好的解决方案是提前定义函数，在 JSX 中只引用执行。</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// Good</span>
<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/*  */</span> <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点击</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意</p><ul><li>如果你的系统不够复杂，这个优化几乎看不出效果，因为 JS 执行非常快 —— 但是，面试说出来肯定是一个加分项～</li><li>如果你用的是函数组件，这个优化方案不适用。如下代码：</li></ul><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 函数组件，每次组件更新都会重新执行 App 函数，所以内部的 clickHandler 函数也会被重新创建，这跟在 JSX 中定义是一样的</span>
  <span class="token comment">// 不过 React 提供了 useCallback 来缓存函数，下文讲</span>

  <span class="token keyword">function</span> <span class="token function">clickHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>clickHandler<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点击</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="在构造函数-bind-this" tabindex="-1"><a class="header-anchor" href="#在构造函数-bind-this" aria-hidden="true">#</a> 在构造函数 bind this</h2><p>同理，如果在 JSX 中 bind this ，那每次组件更新时都要 bind 一次。在构造函数中 bind 更好。<br> 或者，直接使用箭头函数。</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 要在构造函数中 bind this ，而不是在 JSX 中</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clickHandler1</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">clickHandler1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* 如果 JSX 中直接调用，则 this 不是当前组件。所以要 bind this */</span> <span class="token punctuation">}</span>
    <span class="token function-variable function">clickHander2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* 使用箭头函数，不用 bind this */</span> <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickHandler1<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">点击</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PS：如果是函数组件，则不用 bind this</p><h2 id="使用-shouldcomponentupdate-控制组件渲染" tabindex="-1"><a class="header-anchor" href="#使用-shouldcomponentupdate-控制组件渲染" aria-hidden="true">#</a> 使用 shouldComponentUpdate 控制组件渲染</h2><p>React 默认情况下，只要父组件更新，其下所有子组件都会“无脑”更新。如果想要手动控制子组件的更新逻辑</p><ul><li>可使用 <code>shouldComponentUpdate</code> 判断</li><li>或者组件直接继承 <code>React.PureComponent</code> ，相当于在 <code>shouldComponentUpdate</code> 进行 props 的<strong>浅层</strong>比较</li></ul><p>但此时，必须使用<strong>不可变数据</strong>，例如不可用 <code>arr.push</code> 而要改用 <code>arr.concat</code>。考验工程师对 JS 的熟悉程度。<br></p><p>代码参考 components/SimpleTodos/index.js 的 class 组件。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token comment">// import TodoList from &#39;./TodoList&#39;</span>
<span class="token keyword">import</span> FunctionalTodoList <span class="token keyword">from</span> <span class="token string">&#39;./FunctionalTodoList&#39;</span>

<span class="token keyword">class</span> <span class="token class-name">SimpleTodos</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;吃饭&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;睡觉&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">changeInputValue</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">inputValue</span><span class="token operator">:</span> newValue
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">createTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>title<span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token comment">// 新增 todo - 正确处理 （ 不可变数据 - React ）</span>
        <span class="token keyword">const</span> curList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">list</span><span class="token operator">:</span> curList<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">id</span><span class="token operator">:</span> curList<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
                title
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// // 错误的处理示范</span>
        <span class="token comment">// this.state.list.push({</span>
        <span class="token comment">//     id: this.state.list.length,</span>
        <span class="token comment">//     title</span>
        <span class="token comment">// })</span>

        <span class="token comment">// 清空输入框</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
                value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span>
                onInput<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeInputValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>createTodo<span class="token punctuation">}</span><span class="token operator">&gt;</span>创建<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

            <span class="token punctuation">{</span><span class="token comment">/* &lt;TodoList list={this.state.list}&gt;&lt;/TodoList&gt; */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>FunctionalTodoList list<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> SimpleTodos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不可变数据也有相应的第三方库</p><ul><li><a href="https://www.npmjs.com/package/immutable" target="_blank" rel="noopener noreferrer">immutable.js<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.npmjs.com/package/immer" target="_blank" rel="noopener noreferrer">immer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> —— 更加推荐，学习成本低</li></ul><p>PS：React 默认情况（子组件“无脑”更新）这本身并不是问题，在大部分情况下并不会影响性能。因为组件更新不一定会触发 DOM 渲染，可能就是 JS 执行，而 JS 执行速度很快。所以，性能优化要考虑实际情况，不要为了优化而优化。</p><h2 id="react-memo-缓存函数组件" tabindex="-1"><a class="header-anchor" href="#react-memo-缓存函数组件" aria-hidden="true">#</a> React.memo 缓存函数组件</h2><p>如果是函数组件，没有用 <code>shouldComponentUpdate</code> 和 <code>React.PureComponent</code> 。React 提供了 <code>React.memo</code> 来缓存组件。<br> 代码参考 FunctionalTodoList.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">function</span> <span class="token function">FunctionalTodoList</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;todo list fn...&#39;</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> props
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">todo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> title <span class="token punctuation">}</span> <span class="token operator">=</span> todo
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span> 
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>FunctionalTodoList<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>React.memo</code> 也支持自行比较</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">areEqual</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 自行比较，像 shouldComponentUpdate</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">,</span> areEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="usememo-缓存数据" tabindex="-1"><a class="header-anchor" href="#usememo-缓存数据" aria-hidden="true">#</a> useMemo 缓存数据</h2><p>在函数组件中，可以使用 <code>useMemo</code> 和 <code>useCallback</code> 缓存数据和函数。</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>num1<span class="token punctuation">,</span> setNum1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>num2<span class="token punctuation">,</span> setNum2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">,</span> <span class="token punctuation">[</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 缓存数据，像 Vue computed</span>

    <span class="token comment">// const fn1 = useCallback(() =&gt; {...}, [...]) // 缓存函数</span>

    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>info<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PS: 普通的数据和函数，没必要缓存，不会影响性能的。一些初始化比较复杂的数据，可以缓存。</p><h2 id="异步组件" tabindex="-1"><a class="header-anchor" href="#异步组件" aria-hidden="true">#</a> 异步组件</h2><p>和 Vue 异步组件一样</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token comment">// 记载异步组件</span>
<span class="token keyword">const</span> OtherComponent <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackChunkName: &#39;OtherComponent&#39;*/</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./OtherComponent&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token comment">/* 支持 loading 效果 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OtherComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="路由懒加载" tabindex="-1"><a class="header-anchor" href="#路由懒加载" aria-hidden="true">#</a> 路由懒加载</h2><p>和 Vue-router 路由懒加载一样</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./Home&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> List <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;Home&#39;*/</span> <span class="token string">&#39;./List&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/list&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>List<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ssr" tabindex="-1"><a class="header-anchor" href="#ssr" aria-hidden="true">#</a> SSR</h2><p>同 Vue SSR</p><h2 id="答案" tabindex="-1"><a class="header-anchor" href="#答案" aria-hidden="true">#</a> 答案</h2><ul><li>循环使用 key</li><li>修改 css 模拟 <code>v-show</code></li><li>使用 Fragment 减少层级</li><li>JSX 中不要定义函数</li><li>在构造函数 bind this</li><li>使用 shouldComponentUpdate 控制组件渲染</li><li>React.memo 缓存函数组件</li><li>useMemo 缓存数据</li><li>异步组件</li><li>路由懒加载</li><li>SSR</li></ul><h2 id="面试连环问-react-遇到哪些坑" tabindex="-1"><a class="header-anchor" href="#面试连环问-react-遇到哪些坑" aria-hidden="true">#</a> 面试连环问：React 遇到哪些坑？</h2><p>JSX 中，自定义组件命名，开头字母要大写，html 标签开头字母小写</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">{</span><span class="token comment">/* 原生 html 组件 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span><span class="token punctuation">/&gt;</span></span>

<span class="token punctuation">{</span><span class="token comment">/* 自定义组件 */</span><span class="token punctuation">}</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JSX 中 <code>for</code> 写成 <code>htmlFor</code> ， <code>class</code> 写成 <code>className</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token comment">/* for 改成 htmlFor ，class 要改为 className */</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>label htmlFor<span class="token operator">=</span><span class="token string">&quot;input-name&quot;</span> className<span class="token operator">=</span><span class="token string">&quot;xxx&quot;</span><span class="token operator">&gt;</span>
    姓名 <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">&quot;input-name&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>state 作为不可变数据，不可直接修改，使用纯函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// this.state.list.push({...}) // 错误，不符合 React 规范</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> curList<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 使用**不可变数据**</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JSX 中，属性要区分 JS 表达式和字符串</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Demo position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> flag<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Demo position<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> flag<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>state 是异步更新的，要在 callback 中拿到最新的 state 值</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> curNum <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> curNum <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;newNum&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">)</span> <span class="token comment">// 正确</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// console.log(&#39;newNum&#39;, this.state.num) // 错误</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>React Hooks 有很多限制，注意不到就会踩坑。例如，<code>useEffect</code> 内部不能修改 state</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 如果依赖是 [] ，这里 setCount 不会成功</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 只有依赖是 [count] 才可以，这样才会触发组件 update</span>

    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再例如，<code>useEffect</code> 依赖项（即第二个参数）里有对象、数组，就会出现死循环。所以，依赖项里都要是值类型。<br> 因为 React Hooks 是通过 <code>Object.is</code> 进行依赖项的前后比较。如果是值类型，则不妨碍。 如果是引用类型，前后的值是不一样的（纯函数，每次新建值），就类似 <code>{x:100} !== {x:100}</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>obj<span class="token punctuation">,</span> arr<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="面试连环问-setstate-是同步还是异步" tabindex="-1"><a class="header-anchor" href="#面试连环问-setstate-是同步还是异步" aria-hidden="true">#</a> 面试连环问：setState 是同步还是异步？</h2><p>前端经典面试题。先作为思考题，后面会结合代码详细讲解。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: tuwei@lonch.com.cn">tuwei</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/../../assets/app.1c29f384.js" defer></script>
  </body>
</html>
